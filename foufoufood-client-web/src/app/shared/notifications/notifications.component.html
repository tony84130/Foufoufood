<div class="notifications-container">
  <button 
    class="notification-btn"
    (click)="toggleDropdown($event)"
    [class.has-unread]="unreadCount() > 0"
    title="Notifications"
  >
    <span class="bell-icon">üîî</span>
    <span class="badge" *ngIf="unreadCount() > 0">{{ unreadCount() }}</span>
  </button>

  <div class="notifications-dropdown" *ngIf="isOpen()" (click)="$event.stopPropagation()">
    <div class="dropdown-header">
      <h3>Notifications</h3>
      <button 
        class="clear-btn"
        (click)="clearAll()"
        *ngIf="notifications().length > 0"
        title="Tout supprimer"
      >
        üóëÔ∏è
      </button>
    </div>

    <div class="notifications-list" *ngIf="notifications().length > 0">
      <div 
        *ngFor="let notification of notifications()"
        class="notification-item"
        [class.unread]="!notification.read"
        (click)="markAsRead(notification); goToOrder(notification.orderId)"
      >
        <div class="notification-icon">
          {{ getNotificationIcon(notification.type) }}
        </div>
        <div class="notification-content">
          <p class="notification-message">{{ notification.message }}</p>
          <div class="notification-meta">
            <span class="notification-time">{{ formatDate(notification.timestamp) }}</span>
            <span 
              *ngIf="notification.newStatus" 
              class="notification-status"
            >
              {{ getStatusIcon(notification.newStatus) }} {{ notification.newStatus }}
            </span>
          </div>
        </div>
        <button 
          class="remove-btn"
          (click)="removeNotification(notification, $event)"
          title="Supprimer"
        >
          ‚úï
        </button>
      </div>
    </div>

    <div class="empty-state" *ngIf="notifications().length === 0">
      <div class="empty-icon">üì≠</div>
      <p>Aucune notification</p>
    </div>
  </div>
</div>

